# 한글 경로 문제 원인 및 해결 방법

## 🔍 문제 원인

### 1. **Windows PowerShell의 기본 인코딩**
- Windows PowerShell은 기본적으로 **CP949 (EUC-KR)** 인코딩을 사용합니다
- 한글 경로: `c:\Users\HP\OneDrive\Desktop\Leejaeyong\...`
- PowerShell이 이 경로를 CP949로 해석하려다 실패하면 `?면` 같은 깨진 문자로 표시됩니다

### 2. **Python과 PowerShell 간 인코딩 불일치**
- Python 3는 기본적으로 **UTF-8**을 사용합니다
- PowerShell은 **CP949**를 사용합니다
- 두 시스템 간 인코딩이 달라 경로 전달 시 문제가 발생합니다

### 3. **Windows 파일 시스템의 내부 처리**
- Windows NTFS는 내부적으로 UTF-16을 사용하지만
- 명령줄 인터페이스(CMD/PowerShell)는 여전히 CP949를 기본으로 사용합니다

## ✅ 해결 방법

### 방법 1: PowerShell 인코딩 설정 (임시)
```powershell
# UTF-8로 변경
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
$OutputEncoding = [System.Text.Encoding]::UTF8
chcp 65001  # 코드 페이지를 UTF-8로 변경
```

### 방법 2: 배치 파일 사용 (권장)
- `.bat` 파일은 한글 경로를 더 잘 처리합니다
- `chcp 65001` 명령으로 UTF-8 설정 가능

### 방법 3: 환경 변수 설정
```powershell
# PowerShell 프로필에 추가
$env:PYTHONIOENCODING = "utf-8"
$env:STREAMLIT_SERVER_ENCODING = "utf-8"
```

### 방법 4: 프로젝트 경로 변경 (근본적 해결)
- 한글이 없는 경로로 프로젝트 이동
- 예: `C:\Projects\ExtractionOfExpertsBehaviorHistroy`

### 방법 5: 짧은 경로 이름 사용 (8.3 형식)
```powershell
# 짧은 경로 이름 확인
cmd /c dir /x
# 예: C:\Users\HP\OneDrive\Desktop\Leejaeyong\...
```

## 🛠️ 현재 프로젝트의 해결책

코드에서 이미 다음을 시도하고 있습니다:
1. `PYTHONIOENCODING` 환경 변수 설정
2. `STREAMLIT_SERVER_ENCODING` 환경 변수 설정
3. `os.path.abspath(__file__)`로 절대 경로 사용
4. `os.chdir()`로 작업 디렉토리 변경

## 💡 권장 사항

1. **즉시 해결**: 배치 파일(`.bat`) 사용
2. **중기 해결**: PowerShell 프로필에 인코딩 설정 추가
3. **장기 해결**: 프로젝트를 영문 경로로 이동

## 📝 PowerShell 프로필 설정 방법

```powershell
# 프로필 파일 열기
notepad $PROFILE

# 다음 내용 추가:
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
$OutputEncoding = [System.Text.Encoding]::UTF8
$env:PYTHONIOENCODING = "utf-8"
```
